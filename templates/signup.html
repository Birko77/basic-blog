{% extends "base.html" %}

{% block page_title %}
	Signup
{% endblock page_title %}

{% block back_link %}
	<a class="custom_link_navbar" href="/"><span class="glyphicon glyphicon-home" aria-hidden="true"></span></a>
{% endblock back_link %}


{% block content %}
	<br>
	<div class="row">
		<div class="col-xs-12 text-center">
			<div class="text-box">
				<h1><strong>Signup</strong></h1>
			</div>
		</div>
	</div>
	<br>
	<div class="row">
		<div class="col-xs-12">
			<div class="transp-box">
				<br>
				<form class="form-horizontal" method="post" role="form" onsubmit="return checkForm(this);">
					<div class="form-group">
						<label for="inputUsername" class="col-sm-2 control-label">Username</label>
						<div class="col-sm-10">
							<input type="text" class="form-control" maxlength="20" pattern="[a-zA-Z0-9_-]{3,20}" id="inputUsername" placeholder="Your public username" name="username" value="{{username_form}}">
							{% if error_username %}
								<span class="error_message">
									Please use only uppercase letters (A-Z), lowercase letters (a-z), digits (0-9), hyphens (-) or underscores (_). 3 to 20 characters.
								</span>
							{% else %}
								<span class="input_guide">
									Please use only uppercase letters (A-Z), lowercase letters (a-z), digits (0-9), hyphens (-) or underscores (_). 3 to 20 characters.
								</span>
							{% endif %}
							{% if error_username_exists %}
								<span class="error_message">This username is already taken.</span>
							{% endif %}
						</div>
					</div>
					<div class="form-group">
						<label for="inputEmail" class="col-sm-2 control-label">Email</label>
						<div class="col-sm-10">
							<input type="email" class="form-control" pattern="[\S]+@[\S]+\.[\S]+" id="inputEmail" placeholder="Email" name="email" value="{{email_form}}">
							{% if error_email %}
								<span class="error_message">Invalid email.</span>
							{% endif %}
							{% if error_user_exists %}
								<span class="error_message">This email address is already associated with an existing account.</span>
							{% endif %}
						</div>
					</div>
					<div class="form-group">
						<label for="inputVerifyEmail" class="col-sm-2 control-label">Repeat email</label>
						<div class="col-sm-10">
							<input type="email" class="form-control" id="inputVerifyEmail" placeholder="Repeat email" name="verify_email" value="{{verify_email_form}}">
							{% if error_verify_email %}
								<span class="error_message">The two emails do not match.</span>
							{% endif %}
						</div>
					</div>
					<div class="form-group">
						<label for="inputPassword" class="col-sm-2 control-label">Password</label>
						<div class="col-sm-10">
							<input type="password" class="form-control" maxlength="20" pattern="(?=.*?\d)(?=.*?[A-Z])(?=.*?[a-z])[A-Za-z0-9_-]{8,20}" id="inputPassword" placeholder="Password" name="password">
							{% if error_password %}
								<span class="error_message">
				      				Please use only letters, digits, hyphens (-) or underscores (_). 8 to 20 characters.<br>
				      				At least one uppercase letter, one lowercase letter and one digit are required.
								</span>
							{% else %}
								<span class="input_guide">
				      				Please use only letters, digits, hyphens (-) or underscores (_). 8 to 20 characters.<br>
				      				At least one uppercase letter, one lowercase letter and one digit are required.
								</span>
							{% endif %}
						</div>
					</div>
					<div class="form-group">
						<label for="inputVerifyPassword" class="col-sm-2 control-label">Repeat password</label>
						<div class="col-sm-10">
							<input type="password" class="form-control" maxlength="20" id="inputVerifyPassword" placeholder="Repeat password" name="verify_password">
							{% if error_verify_password %}
								<span class="error_message">The two passwords do not match.</span>
							{% endif %}
						</div>
					</div>
					<div class="form-group">
						<div class="col-sm-offset-2 col-sm-10">
							<div class="checkbox">
								<label>
									<input type="checkbox" name="privacy" class="big_check">
									I agree with the <a class="blue-text" href="/privacy">Privacy policy</a> and the <a class="blue-text" href="/terms">Terms of use</a>.
								<label>
							</div>
						</div>
					</div>

					<div class="form-group">
						<div class="col-sm-offset-2 col-sm-10">
							<input type="hidden" name="state" value="{{state}}">
							<button type="submit" class="btn btn-default">Signup</button><br>
						</div>
					</div>
				</form>
			</div>
		</div>
	</div>
	<br>

{% endblock content %}


{% block javascript %}
	<script type="text/javascript">
		function checkForm(form) {
			if(!form.privacy.checked) {
				alert("Bestätige bitte, dass Du die Datenschutzerklärung gelesen hast und sie akzeptierst.");
				form.privacy.focus();
				return false;
			}
			return true;
		}
	</script>
{% endblock javascript %}